<!doctype html>
<html ng-app="myApp">
<head>
    <meta charset="utf-8">
    <title>angular-swagger-ui-material demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <!-- styles CDN -->
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.css">

    <!-- inject:css -->
    <link rel="stylesheet" href="../bower_components/github-markdown-css/github-markdown.css">
    <link rel="stylesheet" href="./styles/swagger-ui-material.css">
    <link rel="stylesheet" href="./directives/toolbar-search.css">
    <link rel="stylesheet" href="./directives/toolbar-edit.css">
    <!-- endinject -->
</head>
<body ng-controller="MyCtrl" layout="column">
<div layout="row"
     flex
     swagger-ui-material
     swagger-methods="swaggerMethods"
     url="swaggerUrl"
     loading="isLoading"
     api-explorer="true"
     validator-url="false"
     trusted-sources="false"
     error-handler="myErrorHandler"></div>

<!-- scripts CDN -->
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-animate.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-aria.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-messages.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-sanitize.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/showdown/1.3.0/showdown.min.js"></script>

<!-- inject:js -->
<script src="../bower_components/angular-swagger-ui/dist/scripts/swagger-ui.js"></script>
<!-- Deprecated Swagger version -->
<!--<script src="../bower_components/angular-swagger-ui/dist/scripts/modules/swagger1-to-swagger2-converter.min.js"></script>-->
<!-- External reference not used in demo -->
<!--<script src="../bower_components/angular-swagger-ui/dist/scripts/modules/swagger-external-references.min.js"></script>-->
<script src="./scripts/swagger-ui-material.js"></script>
<script src="./scripts/swagger-ui-material-http-info.js"></script>
<script src="../bower_components/showdown/dist/showdown.js"></script>
<script src="../bower_components/angular-markdown-filter/markdown.js"></script>
<script src="./modules/swagger-sort.js"></script>
<script src="./modules/swagger-markdown.js"></script>
<script src="./directives/toolbar-search.js"></script>
<script src="./directives/toolbar-edit.js"></script>
<!-- endinject -->

<script type="text/javascript">
    angular.module('myApp', ['swaggerUiMaterial', 'swaggerUiMarkdown', 'swaggerUiSort'])
        .config(function ($mdThemingProvider) {
            var search = {};
            var query = window.location.search.substring(1);
            var vars = query.split('&');

            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                search[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
            }

            $mdThemingProvider
                .theme('default')
                .primaryPalette(search.primary || 'teal')
                .accentPalette(search.accent || 'grey')
                .warnPalette(search.warn || 'amber')
                .foregroundPalette[3] = 'rgba(0, 0, 0, 0.4)';
        })
        .controller('MyCtrl', function ($scope, $location, $mdToast) {
            $scope.isLoading = false;
            $scope.swaggerUrl = $location.search()['url'] || 'http://petstore.swagger.io/v2/swagger.json';

            <!-- TODO: swaggerMethods should have deafault values -->
            $scope.swaggerMethods = {
                'get': 'md-primary',
                post: 'md-accent',
                put: 'md-accent md-hue-2',
                head: 'md-primary md-hue-2',
                'delete': 'md-warn',
                patch: 'md-accent md-hue-2'
            };

            // error management
            $scope.myErrorHandler = function (data, status) {
                $mdToast.show($mdToast.simple().textContent('Failed to load :-('));
                console.error(status, data);
            };
        });
</script>
</body>
</html>
